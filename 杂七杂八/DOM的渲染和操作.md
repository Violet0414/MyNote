### DOM的渲染和操作

#### 虚拟DOM：

​	诸如Vue和React此类框架在渲染时都是选用创建虚拟DOM节点，由虚拟节点去操作真实DOM，如此周转而不直接去操作真实DOM的原因是因为面向增量开发不如面向全量开发。

​	在页面渲染中，假设需要去创建或者删除一个节点，直接调用原生的js操作节点的方法渲染速度往往比使用虚拟dom节点更快，但在开发过程中我们无法去精准的操作每一个节点，将每次DOM节点的操作都做到以最优的方式去执行，这样往往会增大开发者的心智负担，对于代码的开发和维护及其不友好。

​	所以框架中大多都使用虚拟DOM去间接操作真实DOM，**即便真实的执行效率会比直接操作DOM节点慢上一些，但通过diff算法能够针对性的将发生变化的节点进行替换和修改，同时保证其过程消耗的性能尽可能低，作为开发者就不用花费过多的心思去关心节点的操作和渲染过程，大大降低开发和维护的成本，而这样的代价仅仅只是付出一点点性能上的缺失**。

​	说这么多也没什么卵用，基本上也就是在面试的时候装逼才会用到。



#### DOM操作的优化

1. **批量操作：**将多个DOM操作合并为一个批量操作，减少页面重排和重绘的次数。
2. **使用文档片段(DocumentFragment)：**将多个DOM元素的操作放在文档片段中，然后一次性插入页面。
3. **缓存DOM查询结果：**避免多次查询同一个DOM元素，将查询结果缓存到变量中以提高性能。
4. **使用事件委托:** 将事件处理程序绑定在父元素上, 通过事件冒泡机制处理子元素的事件, 减少事件绑定的数量。



#### 会触发页面的重排或回流的情况

	1. 直接获取或计算dom元素的几何位置（例如获取dom元素的offsetTop）
 	2. 页面元素的新增或减少
 	3. 元素尺寸或位置发生改变
 	4. 元素内容变化（文字数量或图片大小等等）
 	5. 元素字体大小变化
 	6. 添加或者删除可见的DOM元素

