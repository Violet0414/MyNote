#### 引用其他文件

​	总有一些场景，需要放到 worker 进程去处理的任务很复杂，需要大量的处理逻辑，我们当然不想把所有代码都塞到 `worker.js` 里，那样就太糟糕了。不出意料，web worker 为我们提供了解决方案，我们可以在 worker 线程中利用 `importScripts()` 方法加载我们需要的js文件，而且，通过此方法加载的js文件**不受同源策略约束**！

```js
// utils.js
const add = (a, b) => a + b;

------------------------------------------------------------

// worker.js（worker线程）
// 使用方法：importScripts(path1, path2, ...); 

importScripts('./utils.js');

console.log(add(1, 2)); // log 3
```



#### ESModule模式

​	在ESMoudle模式下，无法使用**impirtScripts()**导入js文件，此时在初始化worker时可以使用module模式初始化线程。

```js
// main.js（主线程）
const worker = new Worker('/worker.js', {
    type: 'module'  // 指定 worker.js 的类型
});
```

```js
// utils.js
export default add = (a, b) => a + b;
```

```js
// worker.js（worker线程）
import add from './utils.js'; // 导入外部js

self.addEventListener('message', e => { 
    postMessage(e.data);
});

add(1, 2); // log 3

export default self; // 只需把顶级对象self暴露出去即可
```