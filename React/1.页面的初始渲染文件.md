**html文件：**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <!-- 此处root为vue初始渲染页面的容器id -->
    <div id="root"></div>
  </body>
</html>

```



**index.js**

```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

// 该方法可用于项目的性能监控
reportWebVitals();

```



**reportWebVitals()方法：**

CRA的脚手架升级后，在项目根目录下增加了一个新的文件 – reportWebVitals.js，内容如下：

```js
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;
```

  以上含有CLS、FID、FCP、LCP、TTFB这些跟性能指标有些关系的方法，

  其中引入了一个web-vitals库，create-react-app 官网中也有一篇文档Measuring Performance来描述在react项目中使用web-vitals。



**web-vitals 的使用：**

将create-react-app项目中的index.js文件最后一行改为：

```js
reportWebVitals(console.log());
```

在谷歌浏览器打开调试即可看到打印的参数：

![](F:\MyNote\笔记图片\性能监控方法打印.png)







